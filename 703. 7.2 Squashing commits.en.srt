1
00:00:06,669 --> 00:00:07,730
What does squashing mean?

2
00:00:08,269 --> 00:00:12,349
To squash in Git means to
combine multiple commits into one.

3
00:00:13,009 --> 00:00:17,440
Let's say we want to combine C3,
C4, and C5 into a single commit.

4
00:00:18,379 --> 00:00:22,699
Then we can use Git
squash to create a new commit,

5
00:00:22,699 --> 00:00:26,620
which will be a
combination of C3, C4, and C5.

6
00:00:27,820 --> 00:00:29,269
When you should squash commits,

7
00:00:29,269 --> 00:00:32,450
it really depends on what
you have decided as a team.

8
00:00:33,950 --> 00:00:38,810
Instead of many individual commits,
which might be unnecessary, with squashing,

9
00:00:38,810 --> 00:00:44,109
you only get a single commit
appearing in your main commit history.

10
00:00:45,090 --> 00:00:48,039
This can be helpful in
keeping commit history clean.

11
00:00:49,119 --> 00:00:51,520
There are multiple ways
to squash your commits.

12
00:00:52,399 --> 00:00:54,939
The first way is using interactive rebase.

13
00:00:56,119 --> 00:00:59,000
We'll talk more on it in the
interactive rebase section.

14
00:01:01,310 --> 00:01:03,909
The second one we have is using merge.

15
00:01:04,750 --> 00:01:07,750
You can squash all the
commits of a feature

16
00:01:07,750 --> 00:01:10,069
branch while merging into the main branch.

17
00:01:11,329 --> 00:01:14,489
The main benefit of
this is that history stays

18
00:01:14,489 --> 00:01:17,299
clean and there is no
automatic merge commit.

19
00:01:18,120 --> 00:01:21,819
If you merge without squash,
Git will create a merge commit.

20
00:01:22,739 --> 00:01:25,200
Another way to squash
is using pull request.

21
00:01:26,079 --> 00:01:29,640
A lot of Git hosting platforms
like GitHub, GitLab, Bitbucket,

22
00:01:29,640 --> 00:01:34,260
they provide an option to squash the
commits when merging a pull request.

23
00:01:35,140 --> 00:01:39,700
So there is an option when you
click on merge pull request,

24
00:01:39,700 --> 00:01:42,359
and you can choose squash and merge.

25
00:01:42,739 --> 00:01:45,890
This will merge and also
squash all the commits

26
00:01:45,890 --> 00:01:48,680
of your feature branch
into a single commit.

27
00:01:49,959 --> 00:01:51,659
Let's go back to our repository.

28
00:01:53,909 --> 00:02:03,420
So let's start by creating a new branch,
git checkout, minus b, feature squash.

29
00:02:05,000 --> 00:02:07,579
Let's make three commits
to this feature branch.

30
00:02:10,759 --> 00:02:12,819
Squash commit one.

31
00:02:14,689 --> 00:02:20,330
Let's also change the
file to squash file two.

32
00:02:22,949 --> 00:02:23,930
Commit one.

33
00:02:25,990 --> 00:02:32,789
Let's add the changes. Squash commit one.

34
00:02:35,960 --> 00:02:37,840
Let's make two more commits.

35
00:02:44,680 --> 00:02:46,400
And change the commit message.

36
00:02:48,270 --> 00:02:55,039
One more commit, so we'll do
file three, commit three, git add,

37
00:02:55,039 --> 00:02:57,860
and make the third commit.

38
00:02:59,860 --> 00:03:03,270
Now when we do git log,
we have three commits that

39
00:03:03,270 --> 00:03:05,750
we made, commit one,
commit two, commit three.

40
00:03:06,949 --> 00:03:10,990
Now let's say I want to merge this
feature branch into my main branch.

41
00:03:11,689 --> 00:03:15,000
So for that, I will have
to go back to the main

42
00:03:15,000 --> 00:03:19,750
branch We can do it using
checkout command, get checkout main.

43
00:03:21,960 --> 00:03:22,969
We are on main branch.

44
00:03:23,680 --> 00:03:30,520
Now in order to merge, we need to
run the merge command with git merge,

45
00:03:30,520 --> 00:03:34,159
name of the branch, which is feed squash.

46
00:03:35,129 --> 00:03:39,530
Now with merge, you can use a
flag, hyphen hyphen squash.

47
00:03:42,120 --> 00:03:47,379
Now what squash does is that it brings
all the changes to your working directory.

48
00:03:48,419 --> 00:03:53,449
So now all the changes related to those
three commits are in your working directory,

49
00:03:53,449 --> 00:03:55,460
but you need to commit them.

50
00:03:56,560 --> 00:03:59,479
Now there are two ways
how you can commit them.

51
00:04:00,439 --> 00:04:04,919
One way is that you can simply do
commit and provide your own commit message.

52
00:04:05,819 --> 00:04:10,379
This is a combination
of Last three commits.

53
00:04:11,500 --> 00:04:14,240
Or what you can do is just use git commit.

54
00:04:16,459 --> 00:04:19,759
And this time git
created an automatic message

55
00:04:19,759 --> 00:04:22,649
which says squashed
commit of the following,

56
00:04:22,649 --> 00:04:26,370
which contains squash commit
three, commit two, commit one.

57
00:04:27,889 --> 00:04:31,529
So git also automatically
generates a message for you.

58
00:04:31,810 --> 00:04:34,949
You can use the same one or you
can write your own commit message.

59
00:04:36,449 --> 00:04:41,920
So let's use the same one. And now when
you do Git log, you have just one commit,

60
00:04:41,920 --> 00:04:45,240
which is the squashed commit
of the following three commits.

61
00:04:48,720 --> 00:04:51,100
So this is how you can
squash while merging.

62
00:04:52,540 --> 00:04:55,100
Another way to do it
is using pull request.

63
00:04:55,540 --> 00:04:58,060
Let's see how we can
do using pull request.

64
00:05:01,430 --> 00:05:04,470
For that, let's create
a new feature branch.

65
00:05:07,949 --> 00:05:14,519
Get checkout minus B,
feature squash using pull request.

66
00:05:19,980 --> 00:05:25,129
Let's make the changes again.
Let's make three more commits again.

67
00:05:28,949 --> 00:05:32,850
Squash with pull request.

68
00:05:36,029 --> 00:05:36,730
Commit one.

69
00:05:38,480 --> 00:05:40,870
Let's commit the changes.

70
00:05:47,430 --> 00:05:48,149
Commit one.

71
00:05:50,050 --> 00:05:51,389
Let's make two more commits.

72
00:05:54,160 --> 00:05:55,800
Git add all, git commit.

73
00:05:59,240 --> 00:06:02,199
Last commit, git add all.

74
00:06:07,759 --> 00:06:08,519
Git commit.

75
00:06:12,019 --> 00:06:15,060
Okay, so we have made
now three more commits.

76
00:06:18,240 --> 00:06:22,000
Let's change the commit
message of the last commit because

77
00:06:22,000 --> 00:06:24,639
I accidentally choose
the same commit message.

78
00:06:26,600 --> 00:06:28,319
Git commit hyphen hyphen amend.

79
00:06:30,540 --> 00:06:32,500
And now we have three commits.

80
00:06:33,360 --> 00:06:35,100
Commit three, commit two, commit one.

81
00:06:36,370 --> 00:06:40,839
Now this time we want to merge
using pull request and also squash.

82
00:06:43,139 --> 00:06:48,939
So first thing we need to do is
we need to push this pull request,

83
00:06:48,939 --> 00:06:51,639
squash pull request
feature branch to remote,

84
00:06:51,639 --> 00:06:57,050
and for that we need to do git
push minus u, the branch name.

85
00:06:57,550 --> 00:07:03,399
I have to use minus u flag because this
branch right now does not exist on remote.

86
00:07:08,290 --> 00:07:12,329
Okay, just try git push
and use the same command.

87
00:07:14,889 --> 00:07:18,370
So now our feature
branch is already pushed

88
00:07:18,370 --> 00:07:21,850
and there's a link to create pull request.

89
00:07:22,829 --> 00:07:24,089
Let's go to this link.

90
00:07:28,730 --> 00:07:35,370
Let's create a pull request,
squash demo using pull requests.

91
00:07:38,839 --> 00:07:44,500
Best description. And then
click on create pull request.

92
00:07:51,069 --> 00:07:55,009
OK, this branch has some
conflicts which needs to be resolved.

93
00:07:56,649 --> 00:07:57,829
Let's resolve using.

94
00:08:01,379 --> 00:08:02,360
GitHub this time.

95
00:08:05,790 --> 00:08:10,610
Let's accept our changes on
this branch and mark as resolved.

96
00:08:13,509 --> 00:08:14,829
Commit the resolved changes.

97
00:08:15,399 --> 00:08:20,629
So this time I just resolved using
GitHub, but if you have conflicts, you need to,

98
00:08:20,629 --> 00:08:23,240
you can also resolve
using your command line.

99
00:08:24,540 --> 00:08:27,740
So now this time, before
clicking on merge request,

100
00:08:27,740 --> 00:08:32,009
I will click on this arrow
and it says squash and merge.

101
00:08:33,070 --> 00:08:35,269
So let's do the squash and merge.

102
00:08:38,250 --> 00:08:41,389
And now it gives you an option
to change the message as well.

103
00:08:41,409 --> 00:08:50,820
So I can do squash
demo with pull requests.

104
00:08:55,700 --> 00:08:58,779
Okay, let's verify the
changes in our main branch.

105
00:08:59,279 --> 00:09:02,799
Let's go back to our
repository and then do git pull.

106
00:09:07,320 --> 00:09:11,610
Now we do Git log, and we
can see we have the commit

107
00:09:11,610 --> 00:09:14,909
from the branch that we
merged from the pull request.

108
00:09:15,950 --> 00:09:20,840
So this is how you can merge along
with squashing using pull request.
